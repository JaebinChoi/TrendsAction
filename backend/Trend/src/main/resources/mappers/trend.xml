<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.action.trends.repository.TrendRepository">

	<!-- 예측 카테고리인지 기존 카테고리인지 여부에 따른 카테고리의 모든 트렌드 목록 조회 -->
	<select id="readAllTrendsWhetherSelfMadeIs" resultType="java.util.HashMap">
		select category.name as categoryName, trend.name as trendName, trend.id as trendId
		from category, trend
		where category.id = trend.category_id
		and self_made=#{selfMade};
	</select>
	
	<!-- 트렌드 ID로 트렌드 조회 -->
	<select id="readTrendByTrendId">
		select *
		from trend
		where id=#{trendId}
	</select>
	
	<!-- 카테고리 목록 조회 -->
	<select id="readCategoryBySelfMade" resultType="Category">
		select *
		from category
		where self_made=#{selfMade}
	</select>
	
	<!-- 카테고리로 트렌드 목록 조회 -->
	<select id="readBycategoryId" resultType="Trend">
		select *
		from trend
		where category_id=#{categoryId}
	</select>

	<!-- 해당 트렌드의 최신 뉴스 리스트 조회 -->
	<select id="readNewsByTrendId" resultType="News">
		select *
		from news
		where trend_id=#{trendId}
		order by pub_date desc
	</select>

	<!-- 해당 트렌드의 최신 트위터 리스트 조회 -->
	<select id="readTwitterByTrendId" resultType="Twitter">
		select *
		from twitter
		where trend_id=#{trendId}
		order by date desc
	</select>

	<!-- 예측 트렌드 키워드 리스트 조회 -->
	<select id="readPredictedTrend" resultType="Trend">
		select *
		from trend
		where predicted=1
	</select>
	
</mapper>